# 뷰 (VIEW)

`가상의 테이블`이라고 정의할 수 있다. 실체가 없지만 마치 실체가 있는 것처럼 보인다.

## 뷰 생성

```sql
CREATE VIEW 테이블이름
AS
	SELECT id, pw FROM User;
```

위와 같이 뷰를 생성했다면 `SELECT * FROM 테이블이름`으로 `SELECT id, pw FROM User`의 결과를 받아볼 수 있다.

뷰는 기본적으로 `읽기 전용`이지만 뷰를 통해 원래 테이블의 데이터를 수정할 수도 있다.

## 뷰의 장점

1. 보안에 도움이 된다.
2. 복잡한 쿼리를 단순화해준다.

## 뷰 수정 및 삭제

```sql
-- 뷰 수정
ALTER VIEW 테이블이름
AS
	쿼리문;
```

```sql
-- 뷰 삭제
DROP VIEW 테이블이름;
```

이미 뷰가 있는 상태에서 `CREATE VIEW`를 이용하면 오류가 발생한다. 그래서 `CREATE OR REPLACE VIEW`를 이용하면 기존의 뷰를 덮어써 새 뷰를 만들기 때문에 오류가 발생하지 않는다.

```sql
-- 뷰의 소스 코드를 확인하기
SHOW CREATE VIEW 테이블이름;
```

뷰의 데이터를 수정하고 싶을 때에는 다음과 같다.

```sql
UPDATE 테이블이름 SET 컬럼명 = 값 WHERE 컬럼명 = 값;
```

**뷰 생성**에서 원래 테이블의 데이터를 수정할 수 있다고 했는데, 다음과 같은 경우에는 뷰를 통해 데이터를 삽입, 수정, 삭제할 수 없다.

- SUM() 등의 집계 함수를 사용한 뷰
- UNION ALL, JOIN 등을 사용한 뷰
- DISTINCT, GROUP BY 등을 사용한 뷰

예상치 못하게 입력되지 말아야 할 데이터가 입력될 가능성을 미연에 방지하기 위해서 `WITH CHECK OPTION`을 VIEW 생성 및 수정 마지막에 넣어준다.

```sql
-- 뷰의 상태 확인하기
CHECK TABLE 테이블이름;
```
