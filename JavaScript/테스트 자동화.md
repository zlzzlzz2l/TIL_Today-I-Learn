# 테스트 자동화

## 서론

사실 나는 프로젝트 테스트를 제대로 해본 적이 없다.
"프로젝트 잘 마무리만 하면 되지!" 라는 마인드였다. 하지만 이 생각은 결과적으로 당연한 착각이었고, 현업으로 나간다면 프로젝트를 유지, 보수하는 게 주된 일이라는 걸..😅

자바스크립트 기본기가 부족하다고 생각돼서 요즘 다시 보고 있는데, 테스트 자동화에 대한 좋은 글이 있어서 해당 글을 보고 다시 정리해봤다.

---

## 본론

### 테스트는 왜 해야 될까?

주기능에 부가 기능을 추가한다고 생각해보자. 부가 기능을 실행시키는 함수 코드를 짠 후, 원하는 기능이 잘 구현되었는지 확인할 것이다. 원하는 결과가 아닐 때에는 코드를 수정하고 해당 결과가 나올 때까지 이 작업을 반복할 것이다. ~~(내가 그랬다...)~~

하지만 이러한 수정 방법은 `수동`으로 코드를 `재실행`하는 것이라 불완전하다. 왜냐하면 부가 기능을 추가한 함수가 제대로 동작해도 주기능에서 에러가 날 수도 있기 때문이다. 하나를 고치면 다른 문제가 나오는 것처럼..!

### BDD(Behavior Driven Development)

BDD는 테스트(test), 문서(documentation), 예시(example)를 합쳐 모아놓은 개념이다.

코드를 작성하기 전에 자신의 입(자연어)로 코드가 어떤 일을 하는지 표현해야 한다.

이 때 만들어진 결과물을 명세서(specification) 또는 줄여서 스펙(spec)이라고 한다.

- 테스트 : 함수가 의도하는 동작을 제대로 수행하고 있는지 보장한다.
- 문서 : 함수가 어떤 동작을 수행하고 있는지를 설명한다. `describe`와 `it`에 설명이 들어간다.
- 예시 : 실제 동작하는 예시를 이용하여 함수를 어떻게 사용할 수 있는지 알려준다.

```jsx
describe("sum", function () {
  it("두 수의 합", function () {
    assert.equal(sum(1, 1), 2);
  });
});
```

명세서 즉, 스펙은 세 가지로 구성되었다.

- describe("title", function() { ... })

  구현하고자 하는 기능에 대한 설명이 담긴다. 위 코드에서는 sum이 어떤 동작을 하는지에 대한 설명이 들어간다. 또한, it 블록은 한 곳에 모아준다.

- it("설명", function() { ... })

  특정 기능에 대한 설명이 들어간다. 또한, 테스트 함수가 들어간다.

- assert.equal(val1, val2)

  기능을 제대로 구현했다면 해당 구문이 에러없이 실행된다.

  val1의 결과값과 val2의 값이 같아야 에러가 없다는 의미이다.

### 개발 순서

1. 스펙의 초안을 작성한다.
2. 초안을 보고 코드를 작성한다.
3. 코드가 잘 작동하는지 확인하기 위해서 테스트 프레임워크를 사용하여 스펙을 실행한다. 이 때, 코드가 잘못되었다면 에러가 출력되고, 에러를 출력하지 않을 때까지 테스트를 진행한다.
4. 모든 테스트를 통과하는 코드 초안이 완성된다.
5. 스펙에 고려하지 않았던 기능들을 몇 가지 추가하고, 테스트를 진행한다.
6. 3번째 방법으로 돌아가 테스트를 통과할 때까지 수정한다.
7. 3-6단계를 반복한다.

### 테스트 프레임워크

1. Mocha : 핵심 테스트 프레임워크로 뽑힌다. describe와 it과 같은 테스팅 함수와 테스팅 관련 주요 함수를 제공한다.
2. Chai : assert.equal을 제공하듯이 다양한 assertion을 제공해주는 라이브러리이다.
